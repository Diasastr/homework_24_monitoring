Ansible Роль для Моніторингу за допомогою Prometheus та Grafana на AWS EC2
==========================================================================

Ця Ansible роль призначена для автоматизації розгортання Prometheus та Grafana для цілей моніторингу на інстансі AWS EC2. Вона забезпечує гнучке та масштабоване рішення моніторингу, яке підходить для різних застосунків, з акцентом на моніторинг Gitea як приклад.

Особливості Ролі
----------------

-   Налаштування Prometheus: Конфігурація Prometheus для збору метрик, з прикладом конфігурації для моніторингу Gitea.
-   Налаштування Grafana: Розгортання Grafana для візуалізації метрик, зібраних Prometheus, включно з автоматичною конфігурацією джерела даних.
-   Кастомізація: Підтримка шаблонних конфігурацій, що дозволяє легко адаптувати роль під специфічні потреби моніторингу.
-   Безпека: Рекомендації щодо захисту вашого стеку моніторингу на AWS EC2.

Передумови
----------

-   Аккаунт AWS та запущений інстанс EC2 (рекомендовано Ubuntu 20.04 LTS або CentOS 8).
-   Ansible версії 2.9 або вище встановлений на вашій локальній машині або інстансі управління.
-   Базове знайомство з Ansible, Prometheus, та Grafana.

Рекомендовані Операційні Системи
--------------------------------

-   Ubuntu 20.04 LTS: Широко підтримується та пропонує останні функції та оновлення безпеки.
-   CentOS 8: Пропонує стабільність та підтримку довгострокової перспективи, підходить для корпоративних середовищ.

Деталі Конфігурації
-------------------

### Prometheus

-   Файл: `templates/prometheus.yml.j2`
-   Корекції: Розкоментуйте та налаштуйте секцію моніторингу Gitea за потребою. Переконайтеся, що цілі збору даних Prometheus відповідають вашим кінцевим точкам застосунків.

### Grafana

-   Файл: `templates/grafana.ini.j2`
-   Корекції: Встановіть змінні `grafana_domain`, `grafana_admin_user`, `grafana_admin_password` та інші у файлі `defaults/main.yml`, щоб вони відповідали вашому конкретному розгортанню.

### OS та Безпека

-   Переконайтеся, що група безпеки EC2 дозволяє трафік на необхідних портах (наприклад, 3000 для Grafana, 9090 для Prometheus).
-   Розгляньте використання AWS Secrets Manager для управління конфіденційною інформацією, такою як паролі до баз даних та API ключі.

Інструкції з Розгортання
------------------------

1.  Клонуйте Репозиторій Ролі:

    ```bash
    git clone <url-репозиторію>
    cd <директорія-ролі>
    ```

2.  Налаштуйте Змінні:

    -   Відредагуйте `defaults/main.yml`, щоб скорегувати значення за замовчуванням.
    -   Використовуйте `vars/main.yml` для перевизначення змінних специфічних для середовища.
3.  Виконайте Ansible Playbook:

    -   Створіть файл playbook (наприклад, `monitoring-setup.yml`), який включає цю роль.
    -   Запустіть playbook проти вашого(их) інстансу(ів) AWS EC2:

        ```bash
        ansible-playbook monitoring-setup.yml
        ```

Після Розгортання
-----------------

-   Доступ до Grafana: Перейдіть за адресою `http://<IP-АДРЕСА-EC2>:3000` та увійдіть за допомогою адміністративних облікових даних, які ви встановили.
-   Налаштування Дашбордів: Використовуйте інтерфейс Grafana для створення або імпорту інформаційних панелей для візуалізації ваших метрик.

